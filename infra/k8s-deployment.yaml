apiVersion: apps/v1
kind: Deployment
metadata:
  name: ethical-trader-platform
spec:
  replicas: 3
  selector:
    matchLabels:
      app: ethical-trader
  template:
    metadata:
      labels:
        app: ethical-trader
    spec:
      containers:
      - name: compliance-service
        image: compliance-service:latest
        ports:
        - containerPort: 8081
      - name: monitoring-service
        image: monitoring-service:latest
        ports:
        - containerPort: 8082
      - name: rules-engine
        image: rules-engine:latest
        ports:
        - containerPort: 8083
      - name: auto-remediation-service
        image: auto-remediation-service:latest
        ports:
        - containerPort: 8084
      - name: integration-service
        image: integration-service:latest
        ports:
        - containerPort: 8085
      - name: api-gateway
        image: api-gateway:latest
        ports:
        - containerPort: 8080
---
apiVersion: v1
kind: Service
metadata:
  name: ethical-trader-service
spec:
  type: LoadBalancer
  selector:
    app: ethical-trader
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
